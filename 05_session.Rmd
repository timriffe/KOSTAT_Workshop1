---
title: "Session 5 Notes"
author: "Tim Riffe"
date: "2023-07-28"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Get data

# Visualize surface

# derive alpha

# make centered log mortality matrix

# perform SVD

```{r}

# can be recombined:
# (U %*% diag(d) %*% t(V)) 

```

# derive beta and kappa

```{r}
#u     first column of U
#v     first column of V
#d     first element of d

#Bx    rescale u

# secular change
#Kt     <- v * sum(u) * d
```

# put beta and kappa in tidy tables:

# join and predict:

# examine the residuals

# zoom on central residuals

# calculate drift and project kappa

# recombine to create projected mortality schedule

# check age patterns

# project life expectancy

